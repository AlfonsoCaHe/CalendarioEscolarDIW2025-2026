<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendario Escolar 2025-2026 | Programación DIW</title>
    <style>
        :root {
            --bg: #f8fafc;
            --card-bg: #ffffff;
            --text-main: #1e293b;
            --primary: #3b82f6;
            --holiday: #ef4444;
            --non-school: #f59e0b;
            --vacation: #bbf7d0; 
            --diw-class: #e0f2fe;
            --dual: #e9d5ff;
            --weekend: #f1f5f9;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        .info-panel {
            background: #fff;
            border-left: 5px solid #a855f7;
            padding: 15px;
            margin-bottom: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            line-height: 1.6;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
        }

        .dot {
            width: 14px;
            height: 14px;
            border-radius: 4px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .month-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .month-title {
            text-align: center;
            font-weight: bold;
            margin-bottom: 15px;
            color: #334155;
            text-transform: capitalize;
            border-bottom: 1px solid #e2e8f0;
            padding-bottom: 10px;
        }

        .days-header {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            text-align: center;
            font-weight: bold;
            font-size: 0.75rem;
            color: #94a3b8;
            margin-bottom: 10px;
        }

        .days-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
        }

        .day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            border-radius: 6px;
            cursor: default;
            transition: transform 0.1s;
        }

        .day:not(.empty):hover {
            transform: scale(1.1);
            z-index: 10;
        }

        .weekend { background-color: var(--weekend); color: #94a3b8; }
        .holiday { background-color: var(--holiday) !important; color: white !important; font-weight: bold; }
        .non-school { background-color: var(--non-school) !important; color: white !important; font-weight: bold; }
        .vacation { background-color: var(--vacation) !important; color: #166534 !important; }
        .diw-class { background-color: var(--diw-class) !important; color: #0369a1 !important; border: 1px dashed #7dd3fc; }
        .dual { background-color: var(--dual) !important; color: #6b21a8 !important; font-weight: bold; border: 1px solid #c084fc; }

        .ud-table {
            width: 100%;
            margin-top: 40px;
            border-collapse: collapse;
            background: #fff;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .ud-table th, .ud-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        .ud-table th { background: #f1f5f9; color: #475569; font-weight: 600; }

        @media (max-width: 600px) { .calendar-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Planificación Docente 2025/2026</h1>
        <div style="color: var(--primary); font-weight: 600;">Programación DIW</div>
    </header>

    <div class="info-panel">
        <strong>Resumen Unidades Didácticas:</strong><br>
        Se han distribuido 11 unidades entre 76 sesiones disponibles (M, X, V) antes de la Formación Dual.<br>
        <strong>Formación Dual:</strong> Inicia el 13 de abril de 2026 y finaliza el 9 de junio (280h totales / 40 días lectivos).
    </div>

    <div class="legend">
        <div class="legend-item"><div class="dot" style="background: var(--holiday)"></div> Festivo</div>
        <div class="legend-item"><div class="dot" style="background: var(--non-school)"></div> No Lectivo</div>
        <div class="legend-item"><div class="dot" style="background: var(--dual)"></div> Periodo Dual</div>
        <div class="legend-item"><div class="dot" style="background: var(--diw-class)"></div> Sesión UD (Pasa el cursor)</div>
        <div class="legend-item"><div class="dot" style="background: var(--vacation)"></div> Vacaciones</div>
    </div>

    <div id="calendar-container" class="calendar-grid"></div>

    <table class="ud-table" id="summary-table">
        <thead>
            <tr>
                <th>Unidad</th>
                <th>Sesiones Estimadas</th>
                <th>Periodo Aproximado</th>
            </tr>
        </thead>
        <tbody id="ud-summary-body"></tbody>
    </table>
</div>

<script>
    const academicEvents = {
        "2025-10-13": { type: "holiday", label: "Día de la Hispanidad" },
        "2025-10-31": { type: "non-school", label: "Día no lectivo provincial" },
        "2025-11-03": { type: "non-school", label: "Día no lectivo provincial" },
        "2025-12-08": { type: "holiday", label: "Inmaculada Concepción" },
        "2025-12-22": { type: "vacation", label: "Vacaciones Navidad" },
        "2025-12-23": { type: "vacation", label: "Vacaciones Navidad" },
        "2025-12-24": { type: "vacation", label: "Vacaciones Navidad" },
        "2025-12-25": { type: "holiday", label: "Día de Navidad" },
        "2025-12-26": { type: "vacation", label: "Vacaciones Navidad" },
        "2025-12-29": { type: "vacation", label: "Vacaciones Navidad" },
        "2025-12-30": { type: "vacation", label: "Vacaciones Navidad" },
        "2025-12-31": { type: "vacation", label: "Vacaciones Navidad" },
        "2026-01-01": { type: "holiday", label: "Año Nuevo" },
        "2026-01-02": { type: "vacation", label: "Vacaciones Navidad" },
        "2026-01-05": { type: "vacation", label: "Vacaciones Navidad" },
        "2026-01-06": { type: "holiday", label: "Epifanía" },
        "2026-01-07": { type: "non-school", label: "Día no lectivo provincial" },
        "2026-02-27": { type: "non-school", label: "Día Comunidad Educativa" },
        "2026-03-02": { type: "non-school", label: "Día no lectivo provincial" },
        "2026-03-30": { type: "vacation", label: "Vacaciones Semana Santa" },
        "2026-03-31": { type: "vacation", label: "Vacaciones Semana Santa" },
        "2026-04-01": { type: "vacation", label: "Vacaciones Semana Santa" },
        "2026-04-02": { type: "holiday", label: "Jueves Santo" },
        "2026-04-03": { type: "holiday", label: "Viernes Santo" },
        "2026-05-01": { type: "holiday", label: "Día del Trabajo" },
        "2026-05-04": { type: "non-school", label: "Día no lectivo provincial" }
    };

    const schoolStart = new Date(2025, 8, 15);
    const dualStart = new Date(2026, 3, 13);
    const dualEnd = new Date(2026, 5, 9);
    const schoolEnd = new Date(2026, 5, 23);

    // Mapeo de sesiones DIW por fecha
    const diwSessions = {};
    const udDistribution = [];

    function calculateSessions() {
        let current = new Date(schoolStart);
        let sessions = [];

        while (current < dualStart) {
            const dow = current.getDay();
            const key = current.toISOString().split('T')[0];
            
            // Martes(2), Miércoles(3), Viernes(5)
            if ((dow === 2 || dow === 3 || dow === 5) && !academicEvents[key]) {
                sessions.push(key);
            }
            current.setDate(current.getDate() + 1);
        }

        // Dividir las sesiones entre 11 unidades
        const totalSessions = sessions.length;
        const sessionsPerUd = Math.floor(totalSessions / 11);
        const remainder = totalSessions % 11;

        let index = 0;
        for (let i = 1; i <= 11; i++) {
            const count = i <= remainder ? sessionsPerUd + 1 : sessionsPerUd;
            const startKey = sessions[index];
            for (let j = 0; j < count; j++) {
                diwSessions[sessions[index]] = `UD${i}`;
                index++;
            }
            const endKey = sessions[index - 1];
            udDistribution.push({ name: `UD${i}`, count, start: startKey, end: endKey });
        }
        udDistribution.push({name: `UD12`, count: 24, start: '2026-04-14', end: '2026-06-9'});
    }

    function generateCalendar() {
        calculateSessions();
        const container = document.getElementById('calendar-container');
        const months = [
            { m: 8, y: 2025 }, { m: 9, y: 2025 }, { m: 10, y: 2025 }, { m: 11, y: 2025 },
            { m: 0, y: 2026 }, { m: 1, y: 2026 }, { m: 2, y: 2026 }, { m: 3, y: 2026 },
            { m: 4, y: 2026 }, { m: 5, y: 2026 }
        ];

        months.forEach(period => {
            const card = document.createElement('div');
            card.className = 'month-card';
            card.innerHTML = `<div class="month-title">${["enero", "febrero", "marzo", "abril", "mayo", "junio", "julio", "agosto", "septiembre", "octubre", "noviembre", "diciembre"][period.m]} ${period.y}</div>`;
            
            const grid = document.createElement('div');
            grid.className = 'days-grid';
            ['L', 'M', 'X', 'J', 'V', 'S', 'D'].forEach(l => grid.innerHTML += `<div class="days-header">${l}</div>`);

            let firstDay = (new Date(period.y, period.m, 1).getDay() + 6) % 7;
            for (let i = 0; i < firstDay; i++) grid.innerHTML += '<div class="day empty"></div>';

            const daysInMonth = new Date(period.y, period.m + 1, 0).getDate();
            for (let d = 1; d <= daysInMonth; d++) {
                const date = new Date(period.y, period.m, d);
                const key = date.toISOString().split('T')[0];
                const dayEl = document.createElement('div');
                dayEl.className = 'day';
                dayEl.textContent = d;

                const dow = date.getDay();
                const event = academicEvents[key];

                if (event) {
                    dayEl.classList.add(event.type);
                    dayEl.title = event.label;
                } else if (date < schoolStart || date > schoolEnd) {
                    dayEl.classList.add('vacation');
                } else if (dow === 0 || dow === 6) {
                    dayEl.classList.add('weekend');
                } else if (date >= dualStart && date <= dualEnd) {
                    dayEl.classList.add('dual');
                    dayEl.title = "Formación Dual";
                } else if (diwSessions[key]) {
                    dayEl.classList.add('diw-class');
                    dayEl.title = `Sesión de ${diwSessions[key]}`;
                }

                grid.appendChild(dayEl);
            }
            card.appendChild(grid);
            container.appendChild(card);
        });

        // Llenar tabla resumen
        const tbody = document.getElementById('ud-summary-body');
        udDistribution.forEach(ud => {
            const row = tbody.insertRow();
            row.innerHTML = `<td>${ud.name}</td><td>${ud.count} sesiones</td><td>${formatDate(ud.start)} - ${formatDate(ud.end)}</td>`;
        });
    }

    function formatDate(str) {
        const d = new Date(str);
        return `${d.getDate()}/${d.getMonth() + 1}`;
    }

    window.onload = generateCalendar;
</script>
</body>
</html>

